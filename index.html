<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<title>Homepage</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
	<script src="http://code.jquery.com/jquery-2.2.4.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	
	<script>
	<!--> Here is the showProducts.js code <-->
	$(document).on("pagecreate", "#productPage", function(event, data) {
		$.ajax({
			type: 'GET',
			url: 'json/product.json', 
			dataType: 'json',
			success: parseProduct,
			error: errMsg
		});

		function errMsg(req, status, err) {
			alert(`${req} ${status} ${err}`);
		}
		
		function parseProduct(data) {
		
			var product = data.product;
			console.log(product);

			for (var i = 0; i < product.length; i++) {
				var content = "<div data-role='collapsible'><h4>" + product[i].prodName + "\n- $" + product[i].prodAmt.toFixed(2) + "</h4><p id=" + 'prodDesc' + i +"></p><p id=" + 'prodAmt' + i + "></p></div>";
				
				$("#products").append(content).collapsibleset('refresh');
				$("#prodDesc"+i).append(product[i].prodDesc);
				$("#prodAmt"+i).append();
			}
		}
	});
	</script>
</head>
<body>

    <div data-role="page" id="homePage" data-title="Sell More Company Ltd.">
        <div data-role="header">
			<h1>SellMore</h1>
        </div>
	
		<div role="main" class="ui-content">
			<div class='ui-grid-b'>
				<div class='ui-block-a'>
					<a id='goCustomerPage' href="#customerPage">Customers</a><br><br>
					<a id='goProductPage' href="#productPage">Products</a><br><br>
				</div>
				<div class='ui-block-b' id='_out'></div>
				<div class='ui-block-c' id='_out'></div>
				</div>
			</div>
		</div>
	</div>

	<div data-role="page" id="productPage" data-title="Products">
	
		<div data-role="header">
			<a href="index.html" data-icon="back">Go Home</a>
			<h1>Products</h1>
		</div>

		<div role="main" class="ui-content" >
			<div data-role="collapsible-set" id="products"></div>
		</div>
	</div>
</body>
</html>